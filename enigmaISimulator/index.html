<!DOCTYPE html>
<meta name="viewport" content="width=device-width,initial-scale=1">
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
  </head>
  <body>
    <h1>ENIGMA I SIMULATOR</h1>
    <p>
      ドイツ軍の暗号機<b>エニグマ I</b>のシミュレータです。
    </p>
    <div id="enigmaI" style="margin: 0 auto;">
      <div class="auto-centering-container">
        <canvas id="enigma-canvas"></canvas>
      </div>
      <div class="auto-centering-container">
        <textarea id="enigma-input-textarea" placeholder="大文字アルファベット「のみ」を暗号化します（それ以外の文字は暗号化されず出力されます）"></textarea>
      </div>
      <div class="auto-centering-container">
        <textarea readonly id="enigma-result-textarea" placeholder="ここに暗号化の結果が表示されます"></textarea>
      </div>
      <div style="border: 1px solid; padding: 1%;">
        <p style="text-align: center;">
          &#9881;&#65039; 細かい設定 &#9881;&#65039;
        </p>
        <div class="auto-centering-container">
          <input id="plugboard-input", placeholder="プラグボードで交換する文字を「AB DX FK ...」という感じで打ってください" style="text-transform: uppercase; flex: 1;" pattern="[A-Za-z][A-Za-z]( [A-Za-z][A-Za-z])*">
        </div>
        <div class="auto-centering-container">
          <select id="reflector-select" style="flex: 1;">
            <option value="0">REFLECTOR A</option>
            <option value="1">REFLECTOR B</option>
            <option value="2">REFLECTOR C</option>
          </select>
          <select id="rotor0-select" style="flex: 1;">
            <option value="0">ROTOR I</option>
            <option value="1">ROTOR II</option>
            <option value="2">ROTOR III</option>
            <option value="3">ROTOR IV</option>
            <option value="4">ROTOR V</option>
          </select>
          <select id="rotor1-select" style="flex: 1;">
            <option value="0">ROTOR I</option>
            <option value="1">ROTOR II</option>
            <option value="2">ROTOR III</option>
            <option value="3">ROTOR IV</option>
            <option value="4">ROTOR V</option>
          </select>
          <select id="rotor2-select" style="flex: 1;">
            <option value="0">ROTOR I</option>
            <option value="1">ROTOR II</option>
            <option value="2">ROTOR III</option>
            <option value="3">ROTOR IV</option>
            <option value="4">ROTOR V</option>
          </select>
        </div>
        <div style="display: flex; justify-content: space-around;">
          <div>
            <label>リング設定：</label>
            <input required id="ring-input" minlength="3" maxlength="3" size="1" style="text-transform: uppercase;" pattern="[A-Za-z]{3}">
          </div>
          <div>
            <label>回転設定：</label>
            <input required id="rotation-input" minlength="3" maxlength="3" size="1" style="text-transform: uppercase;" pattern="[A-Za-z]{3}">
          </div>
        </div>
      </div>
    </div>
    <h1>おまけ：日本語対応エニグマ</h1>
    <p>
      細かい設定は<s>作るのがめんどくさかったので</s>ないです。
    </p>
    <div id="iroha-enigma" style="margin: 0 auto;">
      <div class="auto-centering-container">
        <canvas id="iroha-enigma-canvas"></canvas>
      </div>
      <div class="auto-centering-container">
        <textarea id="iroha-enigma-input-textarea" placeholder="ひらがな４８種「のみ」を暗号化します（それ以外の文字は暗号化されず出力されます）"></textarea>
      </div>
      <div class="auto-centering-container">
        <textarea readonly id="iroha-enigma-result-textarea" placeholder="ここに暗号化の結果が表示されます"></textarea>
      </div>
      <h2>裏話</h2>
      <p>
        この日本語対応エニグマはこんな感じの定義になっています。この部分だけ見せられても<b>いやなんのこっちゃ</b>って感じだと思いますが、まあ要するにこの日本語版エニグマの設定にもいろいろ元ネタがあるという話です。
      </p>
      <pre>
        <code>new class extends AbstractEnigma {} (
    new PlugBoard(
        IrohaEnigmaHandler.iroha,
        /* あめつちの詞、二回目の「え」は「ん」で置き換えた */
        ['あ', 'め'], ['つ', 'ち'], ['ほ', 'し'], ['そ', 'ら'], ['や', 'ま'], ['か', 'は'], ['み', 'ね'], ['た', 'に'],
        ['く', 'も'], ['き', 'り'], ['む', 'ろ'], ['こ', 'け'], ['ひ', 'と'], ['い', 'ぬ'], ['う', 'へ'], ['す', 'ゑ'],
        ['ゆ', 'わ'], ['さ', 'る'], ['お', 'ふ'], ['せ', 'よ'], ['え', 'の'], ['ん', 'を'], ['な', 'れ'], ['ゐ', 'て']
    ),
    [
        /* 大為爾の歌、末尾に「ん」を追加した */
        new Rotor(IrohaEnigmaHandler.iroha, 'たゐにいてなつむわれをそきみめすとあさりおひゆくやましろのうちゑへるこらもはほせよえふねかけぬん', 'い'),
        /* 鳥啼歌 */
        new Rotor(IrohaEnigmaHandler.iroha, 'とりなくこゑすゆめさませみよあけわたるひんかしをそらいろはえておきつへにほふねむれゐぬもやのうち', 'ろ'),
        /* マジック・ザ・ギャザリング "Now I Know My ABC's" の日本語版フレーバーテキスト、「ゐ」「ゑ」を追加した */
        new Rotor(IrohaEnigmaHandler.iroha, 'れきせんへるすはやいくろこおになまけとわあふたちをひらりかみしものぬえむねほめてよつゆさそうゐゑ', 'は')
    ],
    /* 自動生成したものなので特に元ネタはない */
    new Reflector(IrohaEnigmaHandler.iroha, 'わせもねよとへるめえちないまほきおのんにをしゆてくそれゐゑかさすみぬうひけたむりこらやあはろふつ'),
    'やまと',
    'ことは'
);</code>
      </pre>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script src="../dist/index.js"></script>
  </body>
</html>
